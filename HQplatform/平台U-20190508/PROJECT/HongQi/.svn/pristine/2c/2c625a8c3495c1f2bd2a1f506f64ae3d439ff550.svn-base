<?xml version="1.0" encoding="utf-8" ?>
<Process id="main" flags="1">
<CommunicationParameters>
<Variable id="ProtocolType" type="3" data="1" description="协议"/>
<Variable id="ProtocolPort" type="3" data="0" description="物理通道"/>
<Variable id="FunctionAddress" type="3" data="0" description="功能地址"/>
<Variable id="ECUAddress" type="3" data="0" description="ECU地址"/>
<Variable id="TesterAddress" type="3" data="0xF1" description="VMT地址"/>
<Variable id="Baudrate" type="3" data="500000" description="比特率"/>
<Variable id="TIdle" type="3" data="400" description="IdleLine"/>
<Variable id="TWuP" type="3" data="50" description="WuP"/>
<Variable id="P1Min" type="3" data="0" description="ECUInterval"/>
<Variable id="P1Max" type="3" data="20" description="ECUInterval"/>
<Variable id="P2Min" type="3" data="25" description="TexterReq-&gt;ECURes"/>
<Variable id="P2Max" type="3" data="50" description="TexterReq-&gt;ECURes"/>
<Variable id="P3Min" type="3" data="10" description="ECURes-&gt;TexterReq"/>
<Variable id="P3Max" type="3" data="4000" description="ECURes-&gt;TexterReq"/>
<Variable id="P4Min" type="3" data="5" description="TexterInterval"/>
<Variable id="P4Max" type="3" data="20" description="TexterInterval"/>
<Variable id="CAN_SND_ID" type="3" data="0" description="CAN的发送ID"/>
<Variable id="CAN_RCV_ID" type="3" data="0" description="CAN的接收ID"/>
</CommunicationParameters>
<Start id="1" ActivityType="1" name="开始节点">
<Rect left="415" top="51" right="515" bottom="83"/>
<Script></Script></Start>
<End id="2" ActivityType="2" name="结束节点">
<Rect left="411" top="286" right="511" bottom="318"/>
<Script></Script></End>
<Activities>
<Activity id="3" ActivityType="13" name="KWP2000_GenericDTCText">
<Rect left="83" top="169" right="183" bottom="201"/>
<FunctionRef id="KWP2000_GenericDTCTextFilterList" model="LibGeneral">
<Parameters>
<Parameter id="LineNr" value="0"/>
<Parameter id="DTC_String" value="recString"/>
<Parameter id="Pos" value="3"/>
<Parameter id="Comment" value="&quot;读故障码&quot;"/>
<Parameter id="Timeout" value="10000"/>
<Parameter id="errText" ret="errText"/>
<Parameter id="pCodeTab" ret="PcodeTab"/>
<Parameter id="Filter_Pcode" value="{}"/>
<Parameter id="section" value="&quot;DTC_list_F30&quot;"/>
</Parameters>
</FunctionRef>
</Activity>
<Activity id="4" ActivityType="3" name="普通节点">
<Rect left="82" top="109" right="182" bottom="141"/>
<Script>recString = "\x58\x07\x00\x0A\x20\x00\x10\x28\x00\x12\x2D\x00\x30\x65\x00\x35\x65\x00\x36\x65\x00\x37\x65"


--"P0D3F","P030A","P058F","P059B","P04FF","P01DA","P0522"</Script></Activity>
<Activity id="5" ActivityType="3" name="普通节点">
<Rect left="84" top="225" right="184" bottom="257"/>
<Script>engine.println(tostring(errText))
local i
for i = 1,#PcodeTab do
engine.println(tostring(PcodeTab[i]))
end</Script></Activity>
<Activity id="9" ActivityType="3" name="ECU选择">
<Rect left="415" top="106" right="515" bottom="138"/>
<TitleText Enable="1" Text="ECU 选择 海狮"/>
<ButtonRText Enable="1" Text="确定"/>
<Script>--ECU 选择设置
strECUEPS = "EPS - 电子助力转向";
strECUABS = "ABS - 防抱死";
strECUABA = "ABA - 气囊";

--列表添加
engine.DialogBackColor = -1;


engine.ListClear();
engine.ListAddString(strECUEPS,false);
engine.ListAddString(strECUABS,true);
engine.ListAddString(strECUABA,false);

engine.SelectLayout(1);
#INPUT strECUSel
engine.println("已选择ECU：" .. tostring(strECUSel));
engine.DialogBackColor = -1;</Script></Activity>
<Activity id="10" ActivityType="5" name="ECU_EPS">
<Rect left="267" top="235" right="367" bottom="267"/>
<SubProcesses>
<SubProcess id="ECU_EPS">
</SubProcess>
</SubProcesses>
</Activity>
<Activity id="11" ActivityType="5" name="ECU_ABS">
<Rect left="411" top="222" right="511" bottom="254"/>
<SubProcesses>
<SubProcess id="ECU_ABS">
</SubProcess>
</SubProcesses>
</Activity>
<Activity id="12" ActivityType="5" name="ECU_ABA">
<Rect left="557" top="232" right="657" bottom="264"/>
<SubProcesses>
<SubProcess id="ECU_ABA">
</SubProcess>
</SubProcesses>
</Activity>
<Activity id="13" ActivityType="3" name="普通节点">
<Rect left="414" top="161" right="514" bottom="193"/>
<Script>engine.SelectLayout(0);</Script></Activity>
</Activities>
<Transitions>
<Transition StartId="1" EndId="9" type="0">
</Transition>
<Transition StartId="3" EndId="5" type="0">
</Transition>
<Transition StartId="4" EndId="3" type="0">
</Transition>
<Transition StartId="9" EndId="13" type="0">
</Transition>
<Transition StartId="10" EndId="2" type="0">
</Transition>
<Transition StartId="11" EndId="2" type="0">
</Transition>
<Transition StartId="12" EndId="2" type="0">
</Transition>
<Transition StartId="13" EndId="10" type="1">
<Expression>strECUSel == strECUEPS</Expression></Transition>
<Transition StartId="13" EndId="11" type="1">
<Expression>strECUSel == strECUABS</Expression></Transition>
<Transition StartId="13" EndId="12" type="1">
<Expression>strECUSel == strECUABA</Expression></Transition>
</Transitions>
</Process>

